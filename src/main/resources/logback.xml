<configuration>

    <!-- Console so you still see logs in VS Code / terminal -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} %-5level [%thread] %logger - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Rolling file appender (daily rotate + gzip) -->
    <!-- Change the paths if you don't have permission for /var/log -->
    <property name="LOG_DIR" value="./logs" />
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_DIR}/sheets-import.log</file>

        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- Daily file + keep 14 days -->
            <fileNamePattern>${LOG_DIR}/sheets-import.%d{yyyy-MM-dd}.log.gz</fileNamePattern>
            <maxHistory>14</maxHistory>
            <!-- Optional total size cap (e.g., 1GB) -->
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>

        <encoder>
            <pattern>%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} %-5level [%thread] %logger - %msg%n</pattern>
            <immediateFlush>true</immediateFlush>
        </encoder>

        <!-- (Optional) buffer slightly for disk efficiency -->
        <prudent>false</prudent>
    </appender>

    <!-- Root logger -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>

    <!-- Turn down noisy libs if needed -->
    <!--
  <logger name="org.apache.http" level="WARN"/>
  <logger name="com.google" level="INFO"/>
  -->
</configuration>
